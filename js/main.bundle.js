/*! For license information please see main.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkchicken_liberator=self.webpackChunkchicken_liberator||[]).push([[179],{898:()=>{var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};function n(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}function r(t){var n="function"==typeof Symbol&&Symbol.iterator,r=n&&t[n],e=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function e(t,n){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var e,o,i=r.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(e=i.next()).done;)s.push(e.value)}catch(t){o={error:t}}finally{try{e&&!e.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s}function o(t,n){for(var r=0,e=n.length,o=t.length;r<e;r++,o++)t[o]=n[r];return t}function i(t){return"function"==typeof t}function s(t){var n=t((function(t){Error.call(t),t.stack=(new Error).stack}));return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}Object.create,Object.create;var c=s((function(t){return function(n){t(this),this.message=n?n.length+" errors occurred during unsubscription:\n"+n.map((function(t,n){return n+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=n}}));function a(t,n){if(t){var r=t.indexOf(n);0<=r&&t.splice(r,1)}}var u=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}var n;return t.prototype.unsubscribe=function(){var t,n,s,a,u;if(!this.closed){this.closed=!0;var l=this._parentage;if(l)if(this._parentage=null,Array.isArray(l))try{for(var p=r(l),d=p.next();!d.done;d=p.next())d.value.remove(this)}catch(n){t={error:n}}finally{try{d&&!d.done&&(n=p.return)&&n.call(p)}finally{if(t)throw t.error}}else l.remove(this);var h=this.initialTeardown;if(i(h))try{h()}catch(t){u=t instanceof c?t.errors:[t]}var v=this._teardowns;if(v){this._teardowns=null;try{for(var b=r(v),y=b.next();!y.done;y=b.next()){var m=y.value;try{f(m)}catch(t){u=null!=u?u:[],t instanceof c?u=o(o([],e(u)),e(t.errors)):u.push(t)}}}catch(t){s={error:t}}finally{try{y&&!y.done&&(a=b.return)&&a.call(b)}finally{if(s)throw s.error}}}if(u)throw new c(u)}},t.prototype.add=function(n){var r;if(n&&n!==this)if(this.closed)f(n);else{if(n instanceof t){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._teardowns=null!==(r=this._teardowns)&&void 0!==r?r:[]).push(n)}},t.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},t.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},t.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&a(n,t)},t.prototype.remove=function(n){var r=this._teardowns;r&&a(r,n),n instanceof t&&n._removeParent(this)},t.EMPTY=((n=new t).closed=!0,n),t}(),l=u.EMPTY;function p(t){return t instanceof u||t&&"closed"in t&&i(t.remove)&&i(t.add)&&i(t.unsubscribe)}function f(t){i(t)?t():t.unsubscribe()}var d=null,h=null,v=void 0,b=!1,y=!1,m={setTimeout:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=m.delegate;return((null==r?void 0:r.setTimeout)||setTimeout).apply(void 0,o([],e(t)))},clearTimeout:function(t){var n=m.delegate;return((null==n?void 0:n.clearTimeout)||clearTimeout)(t)},delegate:void 0};function w(t){m.setTimeout((function(){if(!d)throw t;d(t)}))}function g(){}var _=S("C",void 0,void 0);function S(t,n,r){return{kind:t,value:n,error:r}}var x=null;function P(t){if(b){var n=!x;if(n&&(x={errorThrown:!1,error:null}),t(),n){var r=x,e=r.errorThrown,o=r.error;if(x=null,e)throw o}}else t()}function O(t){b&&x&&(x.errorThrown=!0,x.error=t)}var T=function(t){function r(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,p(n)&&n.add(r)):r.destination=$,r}return n(r,t),r.create=function(t,n,r){return new k(t,n,r)},r.prototype.next=function(t){this.isStopped?C(function(t){return S("N",t,void 0)}(t),this):this._next(t)},r.prototype.error=function(t){this.isStopped?C(S("E",void 0,t),this):(this.isStopped=!0,this._error(t))},r.prototype.complete=function(){this.isStopped?C(_,this):(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},r.prototype._next=function(t){this.destination.next(t)},r.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},r.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},r}(u),k=function(t){function r(n,r,e){var o,s=t.call(this)||this;if(i(n))o=n;else if(n){var c;o=n.next,r=n.error,e=n.complete,s&&y?(c=Object.create(n)).unsubscribe=function(){return s.unsubscribe()}:c=n,o=null==o?void 0:o.bind(c),r=null==r?void 0:r.bind(c),e=null==e?void 0:e.bind(c)}return s.destination={next:o?E(o):g,error:E(null!=r?r:j),complete:e?E(e):g},s}return n(r,t),r}(T);function E(t,n){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{t.apply(void 0,o([],e(n)))}catch(t){b?O(t):w(t)}}}function j(t){throw t}function C(t,n){var r=h;r&&m.setTimeout((function(){return r(t,n)}))}var $={closed:!0,next:g,error:j,complete:g},A="function"==typeof Symbol&&Symbol.observable||"@@observable";function I(t){return t}function V(t){return 0===t.length?I:1===t.length?t[0]:function(n){return t.reduce((function(t,n){return n(t)}),n)}}var U=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(n){var r=new t;return r.source=this,r.operator=n,r},t.prototype.subscribe=function(t,n,r){var e,o=this,s=(e=t)&&e instanceof T||function(t){return t&&i(t.next)&&i(t.error)&&i(t.complete)}(e)&&p(e)?t:new k(t,n,r);return P((function(){var t=o,n=t.operator,r=t.source;s.add(n?n.call(s,r):r?o._subscribe(s):o._trySubscribe(s))})),s},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},t.prototype.forEach=function(t,n){var r=this;return new(n=F(n))((function(n,e){var o;o=r.subscribe((function(n){try{t(n)}catch(t){e(t),null==o||o.unsubscribe()}}),e,n)}))},t.prototype._subscribe=function(t){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(t)},t.prototype[A]=function(){return this},t.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return V(t)(this)},t.prototype.toPromise=function(t){var n=this;return new(t=F(t))((function(t,r){var e;n.subscribe((function(t){return e=t}),(function(t){return r(t)}),(function(){return t(e)}))}))},t.create=function(n){return new t(n)},t}();function F(t){var n;return null!==(n=null!=t?t:v)&&void 0!==n?n:Promise}var R,z=s((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),L=function(t){function e(){var n=t.call(this)||this;return n.closed=!1,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return n(e,t),e.prototype.lift=function(t){var n=new N(this,this);return n.operator=t,n},e.prototype._throwIfClosed=function(){if(this.closed)throw new z},e.prototype.next=function(t){var n=this;P((function(){var e,o;if(n._throwIfClosed(),!n.isStopped){var i=n.observers.slice();try{for(var s=r(i),c=s.next();!c.done;c=s.next())c.value.next(t)}catch(t){e={error:t}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(e)throw e.error}}}}))},e.prototype.error=function(t){var n=this;P((function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=t;for(var r=n.observers;r.length;)r.shift().error(t)}}))},e.prototype.complete=function(){var t=this;P((function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var n=t.observers;n.length;)n.shift().complete()}}))},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var n=this,r=n.hasError,e=n.isStopped,o=n.observers;return r||e?l:(o.push(t),new u((function(){return a(o,t)})))},e.prototype._checkFinalizedStatuses=function(t){var n=this,r=n.hasError,e=n.thrownError,o=n.isStopped;r?t.error(e):o&&t.complete()},e.prototype.asObservable=function(){var t=new U;return t.source=this,t},e.create=function(t,n){return new N(t,n)},e}(U),N=function(t){function r(n,r){var e=t.call(this)||this;return e.destination=n,e.source=r,e}return n(r,t),r.prototype.next=function(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)},r.prototype.error=function(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)},r.prototype.complete=function(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)},r.prototype._subscribe=function(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:l},r}(L),M=new Uint8Array(16);function Y(){if(!R&&!(R="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return R(M)}const D=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,J=function(t){return"string"==typeof t&&D.test(t)};for(var W=[],q=0;q<256;++q)W.push((q+256).toString(16).substr(1));const B=function(t,n,r){var e=(t=t||{}).random||(t.rng||Y)();if(e[6]=15&e[6]|64,e[8]=63&e[8]|128,n){r=r||0;for(var o=0;o<16;++o)n[r+o]=e[o];return n}return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(W[t[n+0]]+W[t[n+1]]+W[t[n+2]]+W[t[n+3]]+"-"+W[t[n+4]]+W[t[n+5]]+"-"+W[t[n+6]]+W[t[n+7]]+"-"+W[t[n+8]]+W[t[n+9]]+"-"+W[t[n+10]]+W[t[n+11]]+W[t[n+12]]+W[t[n+13]]+W[t[n+14]]+W[t[n+15]]).toLowerCase();if(!J(r))throw TypeError("Stringified UUID is invalid");return r}(e)},G=new L,H=t=>{G.next({...t,id:B()})},K=(t,n,r)=>{console.error(r),H({class:"uil uil-times",state:"notification active",type:"toast error",title:t,message:n})},Q=(t,n)=>{H({class:"uil uil-check",state:"notification active",type:"toast success",title:t,message:n})},X=`http://${window.location.hostname}${window.location.port?`:${window.location.port}`:""}`,Z=`ws://${window.location.hostname}${window.location.port?`:${window.location.port}`:""}`,tt=new L;new WebSocket(`${Z}/api/gpio`).onmessage=t=>{try{const n=JSON.parse(t.data);tt.next(n)}catch(t){K("Oops","Une erreur de communication",t)}};const nt=async()=>(await fetch(`${X}/api/gpio/out`)).json();var rt=function(t){function r(n,r,e,o,i){var s=t.call(this,n)||this;return s.onFinalize=i,s._next=r?function(t){try{r(t)}catch(t){n.error(t)}}:t.prototype._next,s._error=o?function(t){try{o(t)}catch(t){n.error(t)}finally{this.unsubscribe()}}:t.prototype._error,s._complete=e?function(){try{e()}catch(t){n.error(t)}finally{this.unsubscribe()}}:t.prototype._complete,s}return n(r,t),r.prototype.unsubscribe=function(){var n,r=this.closed;t.prototype.unsubscribe.call(this),!r&&(null===(n=this.onFinalize)||void 0===n||n.call(this))},r}(T);Vue.component("OutputPin",{props:{pin:{type:Object,default:null}},data:function(){return{mutablePin:this.pin}},created:function(){var t,n;tt.pipe((t=t=>t.pin===this.pin.pin,n=function(n,r){var e=0;n.subscribe(new rt(r,(function(n){return t.call(void 0,n,e++)&&r.next(n)})))},function(t){if(function(t){return i(null==t?void 0:t.lift)}(t))return t.lift((function(t){try{return n(t,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")})).subscribe((t=>{this.mutablePin.state=t.state}))},methods:{togglePin:async function(t){t.target.disabled=!0;try{await(async(t,n)=>{const r=await fetch(`${X}/api/gpio/out/${t}/${n}`);tt.next(await r.json())})(this.pin.pin,this.pin.state?0:1),t.target.disabled=!1}catch(n){K("Oops!","Impossible de changer l'état de cette sortie",n),setTimeout((()=>{t.target.checked=!t.target.checked,t.target.disabled=!1}),500)}}},template:'\n      <li>\n        <input \n          type="checkbox"\n          v-bind:id="pin.pin"\n          v-bind:checked="mutablePin.state"\n          v-on:change="togglePin"\n        >\n        <label v-bind:for="pin.pin">\n          <span>Pin {{pin.pin}}</span>\n          <span></span>\n        </label>\n      </li>\n    '}),Vue.component("NotificationToaster",{props:[],data:()=>({loaded:!1,notification:{class:"notification",title:"",message:"",type:""}}),created:function(){G.subscribe((t=>{this.loaded=!0,this.notification=t;const n=t.id;setTimeout((()=>{this.notification.id===n&&this.close()}),3e3)}))},methods:{close:function(){this.notification.state="notification hide"}},template:'\n    <div v-if="loaded" v-bind:class="notification.state">\n      <div v-bind:class="notification.type">\n        <div class="content">\n          <div class="icon">\n            <i v-bind:class="notification.class"></i>\n          </div>\n          <div class="details">\n            <span>{{notification.title}}</span>\n            <p>{{notification.message}}</p>\n          </div>\n        </div>\n        <div class="close-icon" v-on:click="close">\n          <i class="uil uil-times"></i>\n        </div>\n      </div>\n    </div>\n    '}),(async()=>{new Vue({el:"#root",data:{outputPins:[],loadingbtn:"button"},created:async function(){try{const t=await nt();this.outputPins=t,Q("Fini!","Les pins sont toutes bien là")}catch(t){K("Oops!","Impossible charger les sorties",t)}},methods:{loadPins:async function(){this.loadingbtn="button button--loading";try{this.outputPins=await nt(),Q("Fini!","Les pins sont toutes bien là")}catch(t){K("Oops!","Impossible charger les sorties",t)}this.loadingbtn="button"}},template:'\n    <div id="center">\n      <notification-toaster></notification-toaster>\n      <h1>Output Pin</h1>\n      <button v-on:click="loadPins" v-bind:class="loadingbtn">\n        <span class="button__text">Load Pins</span>\n      </button>\n      <ol class="switches">\n        <output-pin\n          v-for="item in outputPins"\n          v-bind:pin="item"\n          v-bind:key="item.pin"\n        ></output-pin>\n      </ol>\n    </div>\n    '})})()}},t=>{t(t.s=898)}]);